<%
layout("/layouts/clean.html"){
%>
<body class="">
<div class="center-wrapper">
    <div class="center-content">
        <div class="row no-m">
            <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3">
                <section class="panel bg-white no-b">
                    <ul class="switcher-dash-action">
                        <li><a href="signin.html" class="selected">登陆</a>
                        </li>
                        <li class="active"><a href="#" class="">注册</a>
                        </li>
                    </ul>
                    <div class="panel panel-default">
                        <div class="panel-body no-p">
                            <div id="wizard" class="wizard">
                                <ul class="steps" style="margin-left: 0">
                                    <li data-target="#step1" class="active">
                                        <span class="badge bg-info badge-success">1</span>1-账号注册
                                    </li>
                                    <li data-target="#step2">
                                        <span class="badge bg-info badge-info">2</span>2-基本信息
                                    </li>
                                    <li data-target="#step3">
                                        <span class="badge bg-info badge-info">3</span>3-证件上传
                                    </li>
                                </ul>
                                <div class="actions btn-group">
                                    <button class="btn btn-default btn-sm btn-prev">
                                        <i class="fa fa-angle-left"></i>
                                    </button>
                                    <button class="btn btn-default btn-sm btn-next">

                                        <i class="fa fa-angle-right"></i></button>
                                </div>
                            </div>

                            <div class="step-content">

                                <form id="unitAddForm" role="form" class="form-horizontal parsley-form"
                                      data-parsley-validate
                                      action="${base}/public/doreg" method="post">

                                    <!--账号注册-->
                                    <div class="step-pane active" id="step1">
                                        <div class="form-group">
                                            <label for="loginname" class="col-sm-3 control-label">用户名</label>

                                            <div class="col-sm-8">
                                                <input type="text" id="loginname" class="form-control" name="loginname"
                                                       data-parsley-required="true" placeholder="用户名">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="password" class="col-sm-3 control-label">登陆密码</label>

                                            <div class="col-sm-8">
                                                <input type="text" id="password" class="form-control" name="password"
                                                       data-parsley-required="true" placeholder="登陆密码">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="username" class="col-sm-3 control-label">姓名/昵称</label>

                                            <div class="col-sm-8">
                                                <input type="text" id="username" class="form-control" name="username"
                                                       data-parsley-required="true"
                                                       placeholder="名称/昵称">
                                            </div>
                                        </div>
                                    </div>

                                    <!--基本信息-->
                                    <div class="step-pane" id="step2">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label for="realname" class="col-sm-3 control-label">${msg['gy.inf.column.realname']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="realname" class="form-control" name="realname" data-parsley-required="true" placeholder="${msg['gy.inf.column.realname']}">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="sex" class="col-sm-3 control-label">${msg['gy.inf.column.sex']}</label>
                                                <div class="col-sm-8">
                                                    <select id="sex" name="sex" data-parsley-required="true" class="form-control">
                                                        <option value="0">男</option>
                                                        <option value="1">女</option>
                                                        <option value="2">保密</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="qq" class="col-sm-3 control-label">${msg['gy.inf.column.qq']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="qq" class="form-control" name="qq" data-parsley-required="true" placeholder="${msg['gy.inf.column.qq']}">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="email" class="col-sm-3 control-label">电子邮箱</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="email" name="email" data-parsley-type="email"
                                                           class="form-control" placeholder="Email">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="phone" class="col-sm-3 control-label">${msg['gy.inf.column.phone']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="phone" class="form-control" name="phone" data-parsley-required="true" placeholder="${msg['gy.inf.column.phone']}">
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label for="idcard" class="col-sm-3 control-label">${msg['gy.inf.column.idcard']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="idcard" class="form-control" name="idcard" data-parsley-required="true" placeholder="${msg['gy.inf.column.idcard']}">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                     <label for="birthday" class="col-sm-3 control-label">${msg['gy.inf.column.birthday']}</label>
                                                    <div class="col-sm-8 input-group date form_datetime " style="padding-left: 16px;padding-right: 16px;" data-date="1979-09-16T05:25:07Z" data-date-format="dd MM yyyy - HH:ii p" data-link-field="birthdayat">
                                                        <input type="text" size="16" readonly class="form-control" value="${@date.getDateTime()}" data-parsley-required="true">
                                                        <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                                        <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                                    </div>
                                                    <input type="hidden" id="birthday" name="birthdayat" value="${@date.getDateTime()}" />
                                                    <!--<input type="text" id="birthday" class="form-control" name="birthday" data-parsley-required="true" placeholder="${msg['gy.inf.column.birthday']}">-->
                                            </div>


                                            <div class="form-group">
                                                <label for="regYear" class="col-sm-3 control-label">${msg['gy.inf.column.regYear']}</label>
                                                <div class="col-sm-8 input-group date form_datetime " style="padding-left: 16px;padding-right: 16px;" data-date="1979-09-16T05:25:07Z" data-date-format="dd MM yyyy - HH:ii p" data-link-field="regYearat">
                                                    <input type="text" size="16" readonly class="form-control" value="${@date.getDateTime()}" data-parsley-required="true">
                                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                                    <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                                </div>
                                                <input type="hidden" id="regYear" name="regYearat" value="${@date.getDateTime()}" />
                                            </div>

                                            <div class="form-group">
                                                <label for="college" class="col-sm-3 control-label">${msg['gy.inf.column.college']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="college" class="form-control" name="college" data-parsley-required="true" placeholder="${msg['gy.inf.column.college']}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="school" class="col-sm-3 control-label">${msg['gy.inf.column.school']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="school" class="form-control" name="school" data-parsley-required="true" placeholder="${msg['gy.inf.column.school']}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="major" class="col-sm-3 control-label">${msg['gy.inf.column.major']}</label>
                                                <div class="col-sm-8">
                                                    <input type="text" id="major" class="form-control" name="major" data-parsley-required="true" placeholder="${msg['gy.inf.column.major']}">
                                                </div>
                                            </div>





                                            <div class="form-group">
                                                <label for="stuLevel" class="col-sm-3 control-label">${msg['gy.inf.column.stuLevel']}</label>
                                                <div class="col-sm-8">
                                                    <select id="stuLevel" name="stuLevel" data-parsley-required="true" class="form-control">
                                                        <option value="0">本科在读</option>
                                                        <option value="1">研究生在读</option>
                                                        <option value="2">博士在读</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                    <!--证件上传-->
                                    <div class="step-pane" id="step3">

                                        <div class="form-group">
                                            <label for="idcardF" class="col-sm-3 control-label">${msg['gy.auth.column.idcardF']}</label>
                                            <div class="col-sm-8">
                                                <div id="idcardFqueue"></div>
                                                <div>
                                                    <input id="idcardF_upload" name="file_upload" type="file" multiple="false">
                                                </div>
                                                <div id="idcardFimg" style="padding: 5px;">
                                                </div>
                                                <input type="hidden" id="idcardF" name="idcardF" value="" >
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="idcardB" class="col-sm-3 control-label">${msg['gy.auth.column.idcardB']}</label>
                                            <div class="col-sm-8">
                                                <div id="idcardBqueue"></div>
                                                <div>
                                                    <input id="idcardB_upload" name="file_upload" type="file" multiple="false">
                                                </div>
                                                <div id="idcardBimg" style="padding: 5px;">
                                                </div>
                                                <input type="hidden" id="idcardB" name="idcardB" value="" >
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="stuCardF" class="col-sm-3 control-label">${msg['gy.auth.column.stuCardF']}</label>
                                            <div class="col-sm-8">
                                                <div id="stuCardFqueue"></div>
                                                <div>
                                                    <input id="stuCardF_upload" name="file_upload" type="file" multiple="false">
                                                </div>
                                                <div id="stuCardFimg" style="padding: 5px;">
                                                </div>
                                                <input type="hidden" id="stuCardF" name="stuCardF" value="" >
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label for="stuCardB" class="col-sm-3 control-label">${msg['gy.auth.column.stuCardB']}</label>
                                            <div class="col-sm-8">
                                                <div id="stuCardBqueue"></div>
                                                <div>
                                                    <input id="stuCardB_upload" name="file_upload" type="file" multiple="false">
                                                </div>
                                                <div id="stuCardBimg" style="padding: 5px;">
                                                </div>
                                                <input type="hidden" id="stuCardB" name="stuCardB" value="" >
                                            </div>
                                        </div>


                                        <div class="col-lg-3"></div>

                                        <div class="col-lg-6">
                                            <div class="form-group text-center">
                                                <label></label>
                                                <div>
                                                    <button class="btn btn-primary btn-block btn-lg btn-parsley"
                                                            data-loading-text="正在提交...">提
                                                        交
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>


                    <!--<div class="p15">-->
                    <!--<form role="form" action="signin.html">-->
                    <!--<input type="text" class="form-control input-lg mb25" placeholder="Choose a username" autofocus>-->
                    <!--<input type="text" class="form-control input-lg mb25" placeholder="Email address">-->
                    <!--<input type="password" class="form-control input-lg mb25" placeholder="Password">-->
                    <!--<input type="password" class="form-control input-lg mb25" placeholder="Confirm password">-->
                    <!--<div class="show">-->
                    <!--<label class="checkbox">-->
                    <!--<input type="checkbox" value="remember-me">I accept-->
                    <!--<a href="javascript:;">Sublime's</a>terms and conditions-->
                    <!--</label>-->
                    <!--</div>-->
                    <!--<button class="btn btn-primary btn-lg btn-block" type="submit">Sign up</button>-->
                    <!--</form>-->
                    <!--</div>-->
                </section>

                <p class="text-center">
                    Copyright &copy;
                    <span id="year" class="mr5"></span>
                    <span>武汉哎嘀信息科技有限公司</span>
                </p>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var el = document.getElementById("year"),
            year = (new Date().getFullYear());
    el.innerHTML = year;
    var ue;
    $(document).ready(function () {

        myForm.init();

//        时间选择
        $('.form_datetime').datetimepicker({
            language:  'zh-CN',
            format:'yyyy-mm-dd hh:ii:ss',
            weekStart: 1,
            todayBtn:  1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            forceParse: 0,
            showMeridian: 1
        });

//        上传文件
        $('#idcardF_upload').uploadifive({
            'auto': true,
            'multi': false,
            'width': '100%',
            'height': '35',
            'buttonText': '请选择图片',
            'fileType': 'image/jpg,image/jpeg,image/png',
            'fileSizeLimit': 1024,
            'queueSizeLimit': 1,
            'formData': {},
            'queueID': 'idcardFqueue',
            'uploadScript': '${base}/open/file/upload/image',
            'onUploadComplete': function (file, data) {
                data = JSON.parse(data);
                if (data.code == 0) {
                    Toast.success(data.msg);
                    $("#idcardFimg").html("<img src='" + data.data + "' style='width:150px;height:95px;'>");
                    $("#idcardF").val(data.data);
                } else {
                    clearFile();
                    Toast.error(data.msg);
                }
            },
            'onDrop': function (file, fileDropCount) {
                clearFile();
            },
            'onClearQueue': function (queue) {
                clearFile();
            },
            'onCancel': function () {
                clearFile();
            }
        });

        $('#idcardB_upload').uploadifive({
            'auto': true,
            'multi': false,
            'width': '100%',
            'height': '35',
            'buttonText': '请选择图片',
            'fileType': 'image/jpg,image/jpeg,image/png',
            'fileSizeLimit': 1024,
            'queueSizeLimit': 1,
            'formData': {},
            'queueID': 'idcardBqueue',
            'uploadScript': '${base}/open/file/upload/image',
            'onUploadComplete': function (file, data) {
                data = JSON.parse(data);
                if (data.code == 0) {
                    Toast.success(data.msg);
                    $("#idcardBimg").html("<img src='" + data.data + "' style='width:150px;height:95px;'>");
                    $("#idcardB").val(data.data);
                } else {
                    clearFile();
                    Toast.error(data.msg);
                }
            },
            'onDrop': function (file, fileDropCount) {
                clearFile();
            },
            'onClearQueue': function (queue) {
                clearFile();
            },
            'onCancel': function () {
                clearFile();
            }
        });

        $('#stuCardF_upload').uploadifive({
            'auto': true,
            'multi': false,
            'width': '100%',
            'height': '35',
            'buttonText': '请选择图片',
            'fileType': 'image/jpg,image/jpeg,image/png',
            'fileSizeLimit': 1024,
            'queueSizeLimit': 1,
            'formData': {},
            'queueID': 'stuCardFqueue',
            'uploadScript': '${base}/open/file/upload/image',
            'onUploadComplete': function (file, data) {
                data = JSON.parse(data);
                if (data.code == 0) {
                    Toast.success(data.msg);
                    $("#stuCardFimg").html("<img src='" + data.data + "' style='width:150px;height:95px;'>");
                    $("#stuCardF").val(data.data);
                } else {
                    clearFile();
                    Toast.error(data.msg);
                }
            },
            'onDrop': function (file, fileDropCount) {
                clearFile();
            },
            'onClearQueue': function (queue) {
                clearFile();
            },
            'onCancel': function () {
                clearFile();
            }
        });

        $('#stuCardB_upload').uploadifive({
            'auto': true,
            'multi': false,
            'width': '100%',
            'height': '35',
            'buttonText': '请选择图片',
            'fileType': 'image/jpg,image/jpeg,image/png',
            'fileSizeLimit': 1024,
            'queueSizeLimit': 1,
            'formData': {},
            'queueID': 'stuCardBqueue',
            'uploadScript': '${base}/open/file/upload/image',
            'onUploadComplete': function (file, data) {
                data = JSON.parse(data);
                if (data.code == 0) {
                    Toast.success(data.msg);
                    $("#stuCardBimg").html("<img src='" + data.data + "' style='width:150px;height:95px;'>");
                    $("#stuCardB").val(data.data);
                } else {
                    clearFile();
                    Toast.error(data.msg);
                }
            },
            'onDrop': function (file, fileDropCount) {
                clearFile();
            },
            'onClearQueue': function (queue) {
                clearFile();
            },
            'onCancel': function () {
                clearFile();
            }
        });

        $("#save").on("click",function(){
            $("#footer_content").val(ue.getContent());
            $('#addForm').submit();
        });

//        提交注册信息
        $('#addForm').ajaxForm({
            dataType: 'json',
            beforeSubmit: function (arr, form, options) {
                sublime.showLoadingbar($(".main-content"));
            },
            success: function (data, statusText, xhr, form) {
                if (data.code == 0) {
                    Toast.success(data.msg);
                } else {
                    Toast.error(data.msg);
                }
                sublime.closeLoadingbar($(".main-content"));
            }
        });

    });
</script>
</body>

<script src="${base!}/assets/plugins/fuelux/wizard.js"></script>

<%}%>
